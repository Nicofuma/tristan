{% extends "SensioLabsJobBoardBundle::layout.html.twig" %}

{% from 'SensioLabsJobBoardBundle:Includes:breadcrumb.html.twig' import breadcrumb %}

{% block page_class 'manage' %}

{% block title 'My jobs'|trans %}

{% block content %}
    {{ breadcrumb({
        ('My jobs'|trans): path('manage'),
    }) }}

    {% embed 'SensioLabsJobBoardBundle:Includes:box.html.twig' %}
        {% block box_content %}
            <div class="padding-table">
                <h2 class="big-title">{% trans %}My jobs{% endtrans %}</h2>
                <a href="{{ path('job_post') }}" class="add right"><img class="sprite-button-add-focus-grey-bg" src="{{ asset('bundles/sensiolabsjobboard/images/blank.png') }}" alt="+" /> {% trans %}Post a job{% endtrans %} </a>
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th class="span5"> {% trans %}Title{% endtrans %} </th>
                        <th class="span2"> {% trans %}Time left{% endtrans %} </th>
                        <th class="span2"> {% trans %}Displays{% endtrans %} </th>
                        <th class="span4"> {% trans %}Actions{% endtrans %} </th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for job in jobs %}
                        <tr>
                            <td>
                                <a href="{{ path('job_preview', {'country': job.company.country , 'contract': job.contractType, 'slug': job.slug }) }}">
                                    {{ job.contractType|contractType|trans }} in {{ job.company.city }} &mdash; {{ job.title }}
                                </a>
                            </td>
                            {% if job.status.value == 'new' %}
                                <td style="color:orange"> {% trans %}Waiting payment{% endtrans %} </td>
                            {% elseif job.status.value == 'published' %}
                                <td style="color:orange"> {% trans %}Not online yet{% endtrans %} </td>
                            {% else %}
                              <td style="color:red"> {% trans %}Unsupported status{% endtrans %} </td>
                            {% endif %}
                            <td>{{ job.totalViewCount }}</td>
                            <td class="action">
                                {#<a href="">Pay</a> /#}
                                <a href="{{ path('job_update', {'country': job.company.country , 'contract': job.contractType, 'slug': job.slug }) }}"> {% trans %}Make changes{% endtrans %} </a>
                                / <a href="{{ path('job_delete', {'country': job.company.country , 'contract': job.contractType, 'slug': job.slug, 'token': csrf_token('delete_job') }) }}"> {% trans %}Delete{% endtrans %} </a>
                            </td>
                        </tr>
                    {% else %}
                        <tr><td colspan="2"> {% trans %}You have no jobs.{% endtrans %} </td></tr>
                    {%  endfor %}
                    {#<tr>
                        <td>
                            <a href="{{ path('job_preview') }}">
                                Full Time in Paris &mdash; Developer
                            </a>
                        </td>

                        <td style="color:orange"> Waiting payment </td>

                        <td> 0 </td>

                        <td class="action">
                            <a href="#">Pay</a> /

                            <a href="{{ path('job_update') }}"> Make changes </a> /

                            <a href="#"> Delete </a>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a href="{{ path('job_preview') }}">
                                Full Time in Paris &mdash; Developer
                            </a>
                        </td>

                        <td style="color:orange"> Not online yet </td>

                        <td> 0 </td>

                        <td class="action">
                            <a href="#"> Publish </a> /

                            <a href="{{ path('job_update') }}"> Make changes </a> /

                            <a href="#"> Delete </a>

                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a href="{{ path('job_preview') }}">
                                Full Time in Paris &mdash; Developer
                            </a>
                        </td>

                        <td>
                            <abbr title="Expires on 31/12/2013">
                                26 days
                            </abbr>
                        </td>

                        <td> 190 </td>

                        <td class="action">
                            <a href="#"> Renew </a> /

                            <a href="{{ path('job_update') }}"> Make changes </a> /

                            <a href="#"> Archive </a> /

                            <a href="#"> Delete </a>

                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a href="{{ path('job_preview') }}">
                                Full Time in Paris &mdash; Developer
                            </a>
                        </td>

                        <td style="color:pink"> Expired</td>

                        <td> 190 </td>

                        <td class="action">
                            <a href="#"> Renew </a> /

                            <a href="{{ path('job_update') }}"> Make changes </a> /

                            <a href="#"> Delete </a>

                        </td>
                    </tr>

                    <tr>
                        <td>
                            <a href="{{ path('job_preview') }}">
                                Full Time in Paris &mdash; Developer
                            </a>
                        </td>

                        <td style="color:green"> Archived </td>

                        <td> 190 </td>

                        <td class="action">
                            <a href="#"> Unarchive </a> /

                            <a href="#"> Delete </a>

                        </td>
                    </tr>#}
                    </tbody>
                </table>
                <div class="smallpagination right">
                    {{ knp_pagination_render(jobs) }}
                </div>
                <div class="clear"></div>
            </div>
        {% endblock%}
        {% block box_clear %}
        {% endblock %}
    {% endembed %}
    <div class="clear"></div>
{% endblock %}
